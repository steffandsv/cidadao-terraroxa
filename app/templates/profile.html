{% extends 'base.html' %}

{% block title %}Perfil{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto space-y-6">

    <!-- Profile Header Card -->
    <div class="bg-white rounded-xl shadow-lg p-6 flex flex-col items-center">
        <div class="w-24 h-24 bg-blue-100 rounded-full flex items-center justify-center text-4xl mb-4">
            
        </div>
        <h1 class="text-2xl font-bold text-gray-800">{{ user['name'] or 'Cidad茫o An么nimo' }}</h1>
        <p class="text-gray-500">{{ user['phone'] }}</p>

        <div class="mt-4 px-4 py-1 bg-purple-100 text-purple-800 rounded-full text-sm font-semibold uppercase tracking-wide">
            {{ user['level_title'] }}
        </div>
    </div>

    <!-- Points & Progress -->
    <div class="bg-white rounded-xl shadow-lg p-6">
        <div class="flex justify-between items-end mb-2">
            <span class="text-gray-600 font-medium">Pontua莽茫o Total</span>
            <span class="text-3xl font-bold text-blue-600">{{ balance }} pts</span>
        </div>

        <!-- Progress Bar -->
        <div class="w-full bg-gray-200 rounded-full h-4 overflow-hidden">
            <div class="bg-gradient-to-r from-blue-400 to-blue-600 h-4 rounded-full transition-all duration-1000 ease-out"
                 style="width: {{ progress }}%"></div>
        </div>
        <p class="text-xs text-gray-400 mt-2 text-right">Pr贸ximo n铆vel em breve...</p>
    </div>

    <!-- History -->
    <div class="bg-white rounded-xl shadow-lg p-6">
        <h2 class="text-lg font-bold text-gray-800 mb-4 border-b pb-2">Hist贸rico de Atividades</h2>

        {% if history %}
            <div class="space-y-4">
                {% for entry in history %}
                <div class="flex justify-between items-center p-3 hover:bg-gray-50 rounded-lg transition">
                    <div>
                        <p class="text-sm font-medium text-gray-800">{{ entry['description'] }}</p>
                        <p class="text-xs text-gray-400">{{ entry['created_at'] }}</p>
                    </div>
                    <span class="font-bold {{ 'text-green-600' if entry['amount'] > 0 else 'text-red-600' }}">
                        {{ '+' if entry['amount'] > 0 }}{{ entry['amount'] }}
                    </span>
                </div>
                {% endfor %}
            </div>
        {% else %}
            <p class="text-gray-500 text-center py-4">Nenhuma atividade registrada ainda.</p>
        {% endif %}
    </div>

    <div class="text-center pt-4">
         <a href="{{ url_for('main.index') }}" class="text-blue-600 underline">Escanear novo c贸digo</a>
    </div>
</div>
{% endblock %}
