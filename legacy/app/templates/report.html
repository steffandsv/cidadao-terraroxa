{% extends 'base.html' %}

{% block content %}
<div class="bg-white p-6 rounded-lg shadow-md">
    <div class="mb-6 flex items-center">
        <a href="{{ url_for('main.asset_view', asset_id=asset.id) }}" class="text-gray-500 mr-4">
            <i class="fas fa-arrow-left fa-lg"></i>
        </a>
        <h1 class="text-xl font-bold text-gray-800">Reportar em {{ asset.hash_code }}</h1>
    </div>

    <form method="post" class="space-y-6">
        <div>
            <label class="block text-gray-700 font-bold mb-2">O que está acontecendo?</label>
            <div class="grid grid-cols-2 gap-4">
                {% for rule in rules %}
                    {% if rule.slug != 'time_tunnel' %}
                    <label class="cursor-pointer">
                        <input type="radio" name="rule_slug" value="{{ rule.slug }}" class="peer sr-only" required>
                        <div class="p-4 rounded-xl border-2 border-gray-200 peer-checked:border-blue-500 peer-checked:bg-blue-50 text-center transition">
                            <div class="text-3xl mb-2">{{ rule.icon|safe }}</div>
                            <span class="text-sm font-bold block">{{ rule.slug|replace('_', ' ')|title }}</span>
                            <span class="text-xs text-green-600 font-bold">+{{ rule.points }} pts</span>
                        </div>
                    </label>
                    {% endif %}
                {% endfor %}
            </div>
        </div>

        <div>
            <label class="block text-gray-700 font-bold mb-2">Evidência (Foto)</label>
            <!-- In a real PWA, this would accept="image/*" capture="environment" -->
            <div class="border-2 border-dashed border-gray-300 rounded-xl p-8 text-center bg-gray-50 text-gray-400">
                <i class="fas fa-camera fa-2x mb-2"></i>
                <p>Toque para tirar foto</p>
                <input type="hidden" name="evidence_url" value=""> <!-- Mocked for now -->
            </div>
        </div>

        <button type="submit"
                class="w-full bg-red-600 hover:bg-red-700 text-white font-bold py-4 px-4 rounded-xl text-xl shadow-lg">
            <i class="fas fa-bullhorn mr-2"></i> Enviar Reporte
        </button>
    </form>
</div>
{% endblock %}
